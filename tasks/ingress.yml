---

- name: AWX Ingress
  kubernetes.core.k8s:
    state: present
    definition:
      apiVersion: networking.k8s.io/v1
      kind: Ingress
      metadata:
        name: awx-ingress
        namespace: awx-system
      spec:
        ingressClassName: nginx
        rules:
        - host: awx.apps.k8s.cloudlabske.io
          http:
            paths:
              - path: /
                pathType: Prefix
                backend:
                  service:
                    name: awx-service
                    port:
                      number: 80
